<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="720" viewBox="0 0 1200 720">
  <defs>
    <style>
      .bg { fill: #0b1020; }
      .panel { fill: #111a33; stroke: #2a3b6a; stroke-width: 2; rx: 14; }
      .title { fill: #eaf0ff; font: 700 26px system-ui, -apple-system, Segoe UI, Roboto, Arial; }
      .text { fill: #d7e1ff; font: 500 16px system-ui, -apple-system, Segoe UI, Roboto, Arial; }
      .muted { fill: #a9b7e6; font: 500 14px system-ui, -apple-system, Segoe UI, Roboto, Arial; }
      .chip { fill: #172554; stroke: #3756a6; stroke-width: 2; rx: 12; }
      .chipTitle { fill: #eaf0ff; font: 700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial; }
      .arrow { stroke: #8bb3ff; stroke-width: 3; fill: none; marker-end: url(#arrowHead); }
      .arrow2 { stroke: #6ee7b7; stroke-width: 3; fill: none; marker-end: url(#arrowHead2); }
      .danger { stroke: #fb7185; }
    </style>
    <marker id="arrowHead" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#8bb3ff"/>
    </marker>
    <marker id="arrowHead2" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#6ee7b7"/>
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="720"/>

  <text class="title" x="60" y="60">AGI Primitives in Ninai (Reference Architecture)</text>
  <text class="muted" x="60" y="88">Goals + Memory + Cognitive Loop + Tools + Simulation + Supervision (fail-closed by default)</text>

  <!-- Left column: Inputs -->
  <rect class="panel" x="60" y="130" width="320" height="520" rx="16"/>
  <text class="chipTitle" x="90" y="170">Inputs</text>

  <rect class="chip" x="90" y="200" width="260" height="64" rx="14"/>
  <text class="chipTitle" x="110" y="232">User / System Events</text>
  <text class="muted" x="110" y="254">tickets, alerts, requests</text>

  <rect class="chip" x="90" y="284" width="260" height="64" rx="14"/>
  <text class="chipTitle" x="110" y="316">Ingestion</text>
  <text class="muted" x="110" y="338">normalize → tag → scope</text>

  <rect class="chip" x="90" y="368" width="260" height="84" rx="14"/>
  <text class="chipTitle" x="110" y="402">Memory Store</text>
  <text class="muted" x="110" y="424">short-term + durable</text>
  <text class="muted" x="110" y="444">RLS + classification</text>

  <rect class="chip" x="90" y="472" width="260" height="84" rx="14"/>
  <text class="chipTitle" x="110" y="506">GoalGraph</text>
  <text class="muted" x="110" y="528">goals + nodes + edges</text>
  <text class="muted" x="110" y="548">evidence links</text>

  <rect class="chip" x="90" y="576" width="260" height="54" rx="14"/>
  <text class="chipTitle" x="110" y="610">Evidence Pack</text>

  <!-- Middle column: Cognitive Loop -->
  <rect class="panel" x="430" y="130" width="380" height="520" rx="16"/>
  <text class="chipTitle" x="460" y="170">Cognitive Loop</text>

  <rect class="chip" x="460" y="200" width="320" height="78" rx="14"/>
  <text class="chipTitle" x="480" y="232">Planner</text>
  <text class="muted" x="480" y="254">steps + required tools</text>

  <rect class="chip" x="460" y="298" width="320" height="86" rx="14"/>
  <text class="chipTitle" x="480" y="332">Executor</text>
  <text class="muted" x="480" y="354">ToolInvoker + logs</text>

  <rect class="chip" x="460" y="404" width="320" height="92" rx="14"/>
  <text class="chipTitle" x="480" y="438">Critic</text>
  <text class="muted" x="480" y="460">pass / fail / needs_evidence</text>
  <text class="muted" x="480" y="482">policy + evidence checks</text>

  <rect class="chip" x="460" y="516" width="320" height="114" rx="14"/>
  <text class="chipTitle" x="480" y="548">Artifacts</text>
  <text class="muted" x="480" y="570">iterations, tool logs, evaluation</text>
  <text class="muted" x="480" y="592">replayable + auditable</text>

  <!-- Right column: Guardrails -->
  <rect class="panel" x="860" y="130" width="280" height="520" rx="16"/>
  <text class="chipTitle" x="890" y="170">Guardrails</text>

  <rect class="chip" x="890" y="200" width="220" height="84" rx="14"/>
  <text class="chipTitle" x="910" y="232">PolicyGuard</text>
  <text class="muted" x="910" y="254">RBAC + scope + clearance</text>
  <text class="muted" x="910" y="274">justification gates</text>

  <rect class="chip" x="890" y="304" width="220" height="84" rx="14"/>
  <text class="chipTitle" x="910" y="336">Simulation</text>
  <text class="muted" x="910" y="358">risk signals + patches</text>
  <text class="muted" x="910" y="378">promotion checks</text>

  <rect class="chip" x="890" y="408" width="220" height="84" rx="14"/>
  <text class="chipTitle" x="910" y="440">SelfModel</text>
  <text class="muted" x="910" y="462">tool reliability</text>
  <text class="muted" x="910" y="482">adaptive gating</text>

  <rect class="chip" x="890" y="512" width="220" height="118" rx="14"/>
  <text class="chipTitle" x="910" y="544">Supervision</text>
  <text class="muted" x="910" y="566">HITL review gates</text>
  <text class="muted" x="910" y="588">meta review for risky ops</text>
  <text class="muted" x="910" y="610">fail-closed defaults</text>

  <!-- Arrows: left -> loop -->
  <path class="arrow" d="M 350 236 C 410 236, 410 236, 460 236"/>
  <path class="arrow" d="M 350 326 C 410 326, 410 326, 460 326"/>
  <path class="arrow" d="M 350 410 C 410 410, 410 410, 460 438"/>
  <path class="arrow" d="M 350 520 C 410 520, 410 520, 460 548"/>

  <!-- Arrows: guardrails -> executor/critic -->
  <path class="arrow2" d="M 890 242 C 840 242, 840 330, 780 330"/>
  <path class="arrow2" d="M 890 346 C 840 346, 840 458, 780 458"/>
  <path class="arrow2" d="M 890 450 C 840 450, 840 330, 780 330"/>
  <path class="arrow2" d="M 890 566 C 840 566, 840 458, 780 458"/>

  <!-- Critical boundary callout -->
  <path class="arrow danger" d="M 780 332 C 820 332, 820 332, 860 242"/>
  <text class="muted" x="690" y="312">All tool calls pass here</text>
</svg>
